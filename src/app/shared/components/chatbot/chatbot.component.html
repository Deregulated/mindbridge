<div class="chatbot-widget">
  <!-- Chat Toggle Button -->
  <button 
    class="chatbot-toggle"
    (click)="toggleChat()"
    [class.open]="isOpen"
    aria-label="Open chatbot">
    <i class="fas fa-comments"></i>
    <span class="notification-dot" *ngIf="messages.length > 1"></span>
  </button>

  <!-- Chat Window -->
  <div class="chatbot-window" [class.open]="isOpen">
    <!-- Header -->
    <div class="chat-header">
      <div class="chat-title">
        <h3>MindBridge Assistant</h3>
        <span class="status">Online</span>
      </div>
      <div class="chat-actions">
        <button class="clear-btn" (click)="clearChat()" aria-label="Clear chat">
          ğŸ—‘ï¸
        </button>
        <button class="close-btn" (click)="toggleChat()" aria-label="Close chat">
          Ã—
        </button>
      </div>
    </div>

    <!-- Messages Container -->
    <div class="messages-container" #messageContainer>
      <div 
        *ngFor="let message of messages"
        class="message"
        [class.user]="message.sender === 'user'"
        [class.bot]="message.sender === 'bot'">
        
        <div class="message-bubble">
          <div class="message-text">{{ message.text }}</div>
          <div class="message-time">
            {{ message.timestamp | date:'shortTime' }}
          </div>
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="input-container">
      <textarea
        [(ngModel)]="newMessage"
        (keydown)="onKeyPress($event)"
        placeholder="Type your message..."
        class="message-input"
        rows="1">
      </textarea>
      <button 
        class="send-btn"
        (click)="sendMessage()"
        [disabled]="!newMessage.trim()"
        aria-label="Send message">
        â¤
      </button>
    </div>
  </div>
</div>